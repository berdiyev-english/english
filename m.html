<!DOCTYPE html>
<html lang="ru">
<head>
<link rel="manifest" href="/english/manifest.json">
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –ê–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="apple-touch-icon" href="/english/icon-192.png">
  <meta charset="UTF-8">
  <title>–¢—Ä–µ–Ω–∞–∂—ë—Ä: –°–æ–±–µ—Ä–∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      margin:0;
      padding:0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f0f5fa;
      min-height:100vh;
    }
    .container {
      max-width: 500px;
      margin: 0 auto;
      background: #fff;
      box-shadow: 0 2px 16px rgba(135,152,172,0.18);
      border-radius:15px;
      padding: 18px 8px 16px 8px;
      margin-top:20px;
      min-height:85vh;
      display: flex;
      flex-direction:column;
      justify-content: flex-start;
      box-sizing: border-box;
    }
    .promo-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 20px;
      padding: 10px 0 18px 0;
      border-bottom: 2px solid #e3eaff;
    }
    .promo-avatar {
      border-radius: 50%;
      width: 110px;
      height: 110px;
      object-fit: cover;
      margin-bottom: 8px;
      border: 3px solid #d1e2fa;
      box-shadow: 0 3px 10px 0 rgba(80,120,200,0.08);
    }
    .promo-title {
      font-size: 1.25em;
      font-weight: bold;
      color: #093c7f;
      margin-bottom: 8px;
      margin-top: 8px;
      text-align: center;
      letter-spacing: 0.15em;
    }
    .promo-desc {
      font-size: 1.06em;
      color: #215086;
      margin-bottom: 13px;
      text-align: center;
      font-weight: 400;
      max-width: 355px;
    }
    .promo-btn {
      display: inline-block;
      background: #1f5bff;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 11px 32px;
      font-size: 1.08em;
      font-weight: 500;
      text-decoration: none;
      box-shadow: 0 2px 8px 0 #407cf888;
      margin-top: 5px;
      margin-bottom: 3px;
      transition: background .18s;
    }
    .promo-btn:hover { background: #3e82fa;}
    /* --- –æ—Å—Ç–∞–ª—å–Ω–æ–µ –æ—Å—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –±—ã–ª–æ --- */
    h2 {
      text-align:center;
      font-size: 1.5rem;
      margin-bottom: 8px;
      color: #2a4960;
      font-weight:500;
    }
    .divider {
      border: none;
      border-top: 2.5px solid #b5cef7;
      width: 92%;
      margin: 0 auto 18px auto;
      opacity: 0.98;
    }
    .sentence {
      font-size: 1.38em;
      text-align: center;
      margin-bottom: 16px;
      font-weight: bold;
      color: #23498d;
      background: #e9f1fc;
      border-radius: 9px;
      padding: 15px 10px 13px 10px;
      box-shadow: 0 1px 7px #dae7ff30;
      border: 1.5px solid #bddafb;
      max-width: 96%;
      margin-left: auto;
      margin-right: auto;
      letter-spacing: 0.5px;
    }
    .assembled {
      min-height:40px;
      border:1.5px dashed #034a7d;
      border-radius:8px;
      background:#eaf5ff;
      color:#232e38;
      font-size:1.15em;
      margin-bottom:8px;
      padding: 9px 5px 7px 8px;
      word-break: break-word;
      box-sizing:border-box;
      font-weight:500;
      letter-spacing: .5px;
    }
    #scheme {
      text-align:center;
      color: #d77215;
      font-style:italic;
      margin-bottom:14px;
      margin-top:2px;
      font-size:1.05em;
      min-height: 22px;
      letter-spacing: .4px;
      user-select: text;
      font-weight: 500;
    }
    .words {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      margin-bottom:15px;
    }
    .word-cell {
      display: flex;
      align-items: center;
      margin-right: 2px;
      margin-bottom: 4px;
    }
    .word-btn {
      background: #1d6cf9;
      color:#fff;
      border: none;
      border-radius: 7px;
      padding: 16px 26px;
      font-size: 1.5em;
      margin: 0;
      cursor: pointer;
      transition: background .20s, opacity .18s;
      box-shadow:0 2px 7px #dbeafd66;
      min-width:65px;
      min-height:52px;
      font-weight: 500;
      position: relative;
      z-index: 1;
      opacity: 1;
      text-decoration: none;
    }
    .word-btn.used {
      background: #d1d7e6;
      color: #5b6b7f;
      opacity: 0.54;
      text-decoration: line-through;
      cursor: default;
      border: none;
      box-shadow: none;
    }
    .sound-btn {
      background: #e3f2ff;
      color: #254696;
      border: none;
      border-radius: 7px;
      padding: 3px 13px;
      font-size: 1.3em;
      margin-left: 4px;
      cursor: pointer;
      vertical-align: middle;
      transition: background .17s;
      box-shadow: none;
      min-width: 40px;
      min-height: 40px;
      font-weight: 400;
    }
    .sound-btn:active { background: #c8dbf7;}
    .result {
      font-weight: bold;
      font-size: 1.13em;
      min-height: 28px;
      text-align:center;
      margin-bottom: 8px;
      color: #0e594d;
      transition: color .18s;
    }
    .hint-block {
      border-top:1px solid #a3b8d9;
      padding-top:8px;
      margin-top: 10px;
      font-size: 1em;
      color: #55607d;
      margin-bottom: 10px;
    }
    .hint-block b { color: #1a388b; }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
      justify-content: center;
      margin-top:10px;
      margin-bottom: 4px;
    }
    .mini-btn {
      background: #26b179;
      color: #fff;
      border: none;
      border-radius: 7px;
      padding: 9px 20px;
      font-size: 1.1em;
      cursor:pointer;
      transition: background .20s;
      margin-bottom:2.5px;
    }
    .mini-btn:disabled {
      background:#abd7c8; opacity:.75;
    }
    /* –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫ (—Ç–µ–ø–µ—Ä—å –≤–Ω–∏–∑—É) */
    .theory {
      background: #f5f7ff;
      color: #26345b;
      border: 1.5px solid #b1c9ed;
      border-radius: 10px;
      padding: 18px 13px 10px 16px;
      margin: 18px auto 0 auto;
      font-size: 1.05em;
      box-shadow: 0 2px 14px #c4d7ef18;
      max-width: 95%;
      line-height: 1.63;
    }
    .theory-title {
      font-size: 1.16em;
      color: #2a407f;
      font-weight: bold;
      margin-bottom: 7px;
    }
    .theory strong { color: #4767b9; }
    .theory .remark {
      display: block;
      color: #b96924;
      margin-top: 3px;
      font-style: italic;
      font-size: 0.98em;
    }
    /* –ú–µ–¥–∏–∞–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–£–°–ò–õ–ò–í–ê–ï–ú —Ä–∞–∑–º–µ—Ä –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö) */
    @media (max-width: 600px) {
      .container {max-width: 99vw; margin:2px auto;}
      .sentence { font-size:1.2em;} /* –ù–µ–º–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–∏–ª —Ä—É—Å—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ */
      .word-btn {
         font-size:1.4em; /* –°–¥–µ–ª–∞–ª –ë–û–õ–¨–®–ï –Ω–∞ —Å—Ä–µ–¥–Ω–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
         padding:14px 10px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª padding */
         min-width:45px; min-height:38px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª –º–∏–Ω. —Ä–∞–∑–º–µ—Ä—ã */
      }
      .sound-btn {
         font-size:1.25em; /* –°–¥–µ–ª–∞–ª –ë–û–õ–¨–®–ï –Ω–∞ —Å—Ä–µ–¥–Ω–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
         padding:5px 9px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª padding */
         min-width:38px; min-height:38px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª –º–∏–Ω. —Ä–∞–∑–º–µ—Ä—ã */
      }
      .words { gap: 10px; } /* –ß—É—Ç—å —É–º–µ–Ω—å—à–∏–ª gap */
      h2 {font-size:1.11em;}
      .theory {font-size:0.98em;}
      .hint-block {font-size:0.97em;}
      #scheme {font-size:.97em;}
      .assembled {font-size:1.05em;} /* –ß—É—Ç—å —É–≤–µ–ª–∏—á–∏–ª —Å–æ–±—Ä–∞–Ω–Ω–æ–µ */
      .promo-title {font-size:1.07em;}
    }
    @media (max-width:400px){
      .container{padding: 7px 1vw;}
      .sentence {font-size: 1.1em;} /* –ï—â–µ —á—É—Ç—å —É–≤–µ–ª–∏—á–∏–ª —Ä—É—Å—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ */
       .word-btn {
         font-size: 1.3em; /* –°–¥–µ–ª–∞–ª –ë–û–õ–¨–®–ï –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
         padding:11px 9px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª padding */
         min-width:40px; min-height:35px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª –º–∏–Ω. —Ä–∞–∑–º–µ—Ä—ã */
      }
      .sound-btn {
         font-size: 1.1em; /* –°–¥–µ–ª–∞–ª –ë–û–õ–¨–®–ï –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
         padding:4px 8px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª padding */
         min-width:35px; min-height:35px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª –º–∏–Ω. —Ä–∞–∑–º–µ—Ä—ã */
      }
      .words { gap: 8px; } /* –ï—â–µ —á—É—Ç—å —É–º–µ–Ω—å—à–∏–ª gap */
      .theory {font-size:.93em;}
    }
  </style>
</head>
<body>
<div class="container">

  <!-- –†–ï–ö–õ–ê–ú–ù–´–ô/–ü–†–ò–ì–õ–ê–°–ò–¢–ï–õ–¨–ù–´–ô –ë–õ–û–ö –° –§–û–¢–û/–ö–ù–û–ü–ö–û–ô -->
  <div class="promo-block">
    <img class="promo-avatar"
    src="https://static.tildacdn.info/tild3532-3739-4433-a633-613530366563/-/resize/504x/IMG_7738.PNG" alt="–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å">
    <div class="promo-title">
      –°–æ–±–µ—Ä–∏—Ç–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
    </div>
    <div class="promo-desc">
      –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–µ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏ –ø–æ–Ω–∏–º–∞—Ç—å –µ–≥–æ
    </div>
    <a class="promo-btn" href="https://t.me/+NvMX2DrTa3w1NTVi" target="_blank">
      –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —É—Ä–æ–∫ –ê–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ
    </a>
  </div>
  <!-- –ö–û–ù–ï–¶ –†–ï–ö–õ–ê–ú–ù–û–ì–û –ë–õ–û–ö–ê -->

  <!-- —Å–∞–º —Ç—Ä–µ–Ω–∞–∂—ë—Ä -->
  <div class="sentence" id="russianSentence"></div>
  <div class="assembled" id="assembled"></div>
  <div id="scheme"></div>
  <div class="words" id="words"></div>

  <div class="controls">
    <button class="mini-btn" onclick="clearAssembled()">–°–±—Ä–æ—Å–∏—Ç—å</button>
    <button class="mini-btn" onclick="nextSentence(true)">–î—Ä—É–≥–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</button>
    <button class="mini-btn" onclick="playSound()" title="–û–∑–≤—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥">üîä</button>
  </div>
  <div class="result" id="result"></div>
  <div class="hint-block" id="hintblock"></div>
  <div class="theory">
    <div class="theory-title">–ß—Ç–æ —Ç–∞–∫–æ–µ –ü–æ–º–æ—â–Ω–∏–∫–∏?</div>
    –ü–æ–º–æ—â–Ω–∏–∫–∏ (<strong>auxiliary verbs</strong>) ‚Äî —ç—Ç–æ —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å–∞–º–∏ –ø–æ —Å–µ–±–µ –Ω–µ –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è, –Ω–æ&nbsp;–ø–æ–º–æ–≥–∞—é—Ç —Å—Ç—Ä–æ–∏—Ç—å <strong>–≤–æ–ø—Ä–æ—Å—ã</strong>, <strong>–æ—Ç—Ä–∏—Ü–∞–Ω–∏—è</strong> –∏&nbsp;–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤—Ä–µ–º–µ–Ω–∞.<br>
    <strong>–ü—Ä–∏–º–µ—Ä—ã</strong> : <span style="color:#216"><b>do</b></span>, <span style="color:#216"><b>did</b></span>, <span style="color:#216"><b>will</b></span>, <span style="color:#216"><b>am</b></span>, <span style="color:#216"><b>is</b></span>, <span style="color:#216"><b>are</b></span>, <span style="color:#216"><b>was</b></span>, <span style="color:#216"><b>were</b></span>.
    <span class="remark">–í –∫–∞–∂–¥–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ —Å—Ç–∞–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ <b>–æ–¥–∏–Ω –ø–æ–º–æ—â–Ω–∏–∫!</b></span>
    <br><br>
    <strong>–ö–∞–∫ —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–æ–ø—Ä–æ—Å:</strong><br>
    <ul>
      <li>–ï—Å–ª–∏ –µ—Å—Ç—å <b>–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ</b> (What, Where, Why, When, How, Who –∏ –¥—Ä.), –æ–Ω–æ –∏–¥—ë—Ç –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ.</li>
      <li>–ó–∞—Ç–µ–º ‚Äî <b>–ø–æ–º–æ—â–Ω–∏–∫</b>, <b>–ø–æ–¥–ª–µ–∂–∞—â–µ–µ</b> –∏ <b>—Å–º—ã—Å–ª–æ–≤–æ–π –≥–ª–∞–≥–æ–ª</b>.</li>
      <li>–ü—Ä–∏–º–µ—Ä —Å –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º —Å–ª–æ–≤–æ–º: <span style="color: #173"><b>Where do you live?</b></span></li>
      <li>–ü—Ä–∏–º–µ—Ä –±–µ–∑ –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ: <span style="color: #173"><b>Do you play football?</b></span></li>
    </ul>
    <span class="remark"><b>–í–ê–ñ–ù–û!</b> <b>Do, did</b> –Ω–µ —Å—Ç–∞–≤—è—Ç—Å—è –≤ –æ–±—ã—á–Ω–æ–º (—É—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω–æ–º) –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–π.<br>
    –ü—Ä–∏–º–µ—Ä (—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ): I play football. (–¢—É—Ç do –Ω–µ –ø–æ—Å—Ç–∞–≤–∏–ª–∏)<br>
    –ü—Ä–∏–º–µ—Ä (–æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ): I do not play football. (–¢—É—Ç –ø–æ—Å—Ç–∞–≤–∏–ª–∏)<br>
    –ü—Ä–∏–º–µ—Ä (–≤–æ–ø—Ä–æ—Å): Do you play football? (–∏ —Ç—É—Ç —Ç–æ–∂–µ)
    </span>
<br>
 <h3>–ü–æ–ª–µ–∑–Ω—ã–µ —Ñ—Ä–∞–∑—ã</h3>
    <ul>
        <li><b>I have</b> ‚Äî —É –º–µ–Ω—è, —É –º–µ–Ω—è –µ—Å—Ç—å</li>
        <li><b>I had</b> ‚Äî —É –º–µ–Ω—è –±—ã–ª–æ, —è –∏–º–µ–ª</li>
    </ul>
    <div class="highlight-blue">
      <b>–í–∞–∂–Ω–æ:</b> –Ω–µ –ø—É—Ç–∞–π—Ç–µ <b>was/were</b> –∏ <b>had</b> –º–µ–∂–¥—É —Å–æ–±–æ–π!<br>
      <ul style="margin-top:6px;">
        <li><b>was/were</b> ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –∫–µ–º-—Ç–æ –±—ã–ª–∏ –∏–ª–∏ –≥–¥–µ-—Ç–æ –±—ã–ª–∏</li>
        <li><b>had</b> ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É –≤–∞—Å —á—Ç–æ-—Ç–æ –±—ã–ª–æ</li>
      </ul>
      <div style="margin-top:7px;">
        <b>–ï—Å–ª–∏ –≤—ã –∏—Ö –ø–µ—Ä–µ–ø—É—Ç–∞–µ—Ç–µ, —Ç–æ –ø–æ–º–µ–Ω—è–µ—Ç–µ —Å–º—ã—Å–ª –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.</b><br>
        <b>I had a dog</b> ‚Äî –£ –º–µ–Ω—è –±—ã–ª–∞ —Å–æ–±–∞–∫–∞<br>
        <b>I was a dog</b> ‚Äî –Ø –±—ã–ª —Å–æ–±–∞–∫–æ–π<br>
<b>They had a dog</b> ‚Äî –£ –Ω–∏—Ö –±—ã–ª–∞ —Å–æ–±–∞–∫–∞<br>
      <b>They were dogs</b> ‚Äî –û–Ω–∏ –±—ã–ª–∏ —Å–æ–±–∞–∫–æ–π
      </div>
    </div>

    <div class="highlight-green">
      <b>–õ–∞–π—Ñ—Ö–∞–∫:</b> –µ—Å–ª–∏ —Ä—É—Å—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞ –±—É–∫–≤—É ¬´–£¬ª, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ <b>have</b> –∏–ª–∏ <b>had</b>.<br>
      –ù–∞–ø—Ä–∏–º–µ—Ä:<br>
      <b>–£ –º–µ–Ω—è –±—ã–ª –¥—Ä—É–≥</b> (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å ¬´–£¬ª) ‚Äî –∑–Ω–∞—á–∏—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º <b>had</b>, –∞ –Ω–µ <b>was</b>:<br>
      <span class="example">I had a friend - –£ –º–µ–Ω—è –±—ã–ª –¥—Ä—É–≥ </span>
  </div>
</div>
<script>
// --- –≤–µ—Å—å JS –¥–ª—è —Ç—Ä–µ–Ω–∞–∂—ë—Ä–∞ ---
const sentences = [
{ru: "–Ø —É–¥–∏–≤–ª—ë–Ω, —á—Ç–æ –æ–Ω–∏ –Ω–µ –ø—Ä–∏—à–ª–∏.", en: "I am surprised that they didn't come."}, {ru: "–Ø –Ω–µ –≤ –∫—É—Ä—Å–µ —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã.", en: "I don't know of this issue."}, {ru: "–Ø –≥–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å —Å—Ä–∞–∑—É –∂–µ.", en: "I am ready to start now."}, {ru: "–Ø –Ω–µ –ø–æ–Ω–∏–º–∞—é –≤–∞—à–µ–π –ª–æ–≥–∏–∫–∏.", en: "I am not following your logic."}, {ru: "–†–∞–∑–≤–µ —è –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã–ª –ø–æ–∑–≤–æ–Ω–∏—Ç—å —Ç–µ–±–µ?", en: "Am I not supposed to call you?"}, {ru: "–Ø –∏–¥—É –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏?", en: "Am I going in the right direction?"}, {ru: "–ü—Ä–∞–≤–¥–∞ –ª–∏, —á—Ç–æ —è –æ—à–∏–±–∞—é—Å—å?", en: "Am I really wrong?"}, {ru: "–û–Ω –≤—ã–≥–ª—è–¥–∏—Ç —É—Å—Ç–∞–≤—à–∏–º –ø–æ—Å–ª–µ –¥–æ–ª–≥–æ–≥–æ –¥–Ω—è.", en: "He is looking tired after the long day."}, {ru: "–≠—Ç–æ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–º–æ.", en: "It is impossible."}, {ru: "–û–Ω–∞ –≤—Å—ë –µ—â—ë –∑–∞–Ω—è—Ç–∞ —Å–≤–æ–∏–º–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º–∏.", en: "She is still busy with her research."}, {ru: "–†–∞–∑–≤–µ —ç—Ç–æ –Ω–µ —Å—Ç–æ–∏–ª–æ –≤–Ω–∏–º–∞–Ω–∏—è?", en: "Isn't it worth the attention?"}, {ru: "–†–∞–∑–≤–µ –æ–Ω –Ω–µ –≥–ª–∞–≤–Ω—ã–π –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º—ã–π?", en: "Isn't he the prime suspect?"}, {ru: "–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≥–ª–∞–≤–Ω—ã–π –æ—Ñ–∏—Å?", en: "Where is the main office?"}, {ru: "–í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è.", en: "It is important to note the consequences."}, {ru: "–ú—ã –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã –≤ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–µ —Å –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–µ–π.", en: "We are interested in collaborating with your company."}, {ru: "–û–Ω–∏ –Ω–µ –≥–æ—Ç–æ–≤—ã –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º.", en: "They are not prepared for unexpected questions."}, {ru: "–¢—ã –∏ –î–∂–µ–π–Ω –≤—Å—ë –µ—â—ë –¥—Ä—É–∑—å—è?", en: "Are you and Jane still friends?"}, {ru: "–ì–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∫–ª—é—á–∏ –æ—Ç –º–∞—à–∏–Ω—ã?", en: "Where are the car keys?"}, {ru: "–¢–≤–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã?", en: "Are your documents ready?"}, {ru: "–Ø –æ—á–µ–Ω—å –≤–∑–≤–æ–ª–Ω–æ–≤–∞–Ω.", en: "I am very excited."}, {ru: "–†–∞–∑–≤–µ –æ–Ω–∏ –Ω–µ –∑–Ω–∞—é—Ç –ø—Ä–∞–≤–∏–ª?", en: "Don't they know the rules?"}, {ru: "–û–Ω–∞ –±—ã–ª–∞ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∞ —Ç–≤–æ–µ–π –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–µ–π.", en: "She was impressed by your presentation."}, {ru: "–í—á–µ—Ä–∞ –Ω–µ –±—ã–ª–æ –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º.", en: "There was no problem yesterday."}, {ru: "–û–Ω –±—ã–ª —Ç–µ–º, –∫—Ç–æ –≤—Å—ë –Ω–∞—á–∞–ª.", en: "He was the one who started everything."}, {ru: "–ì–¥–µ –±—ã–ª–∞ –≤—Å—Ç—Ä–µ—á–∞ –≤ –ø—Ä–æ—à–ª—É—é –ø—è—Ç–Ω–∏—Ü—É?", en: "Where was the meeting last Friday?"}, {ru: "–≠—Ç–æ –Ω–µ –±—ã–ª–æ —è—Å–Ω–æ?", en: "Wasn't it clear?"}, {ru: "–Ø –Ω–µ –±—ã–ª –≤–æ–≤–ª–µ—á—ë–Ω –≤ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç.", en: "I was not involved in this project."}, {ru: "–£—Ç—Ä–æ –±—ã–ª–æ –æ—á–µ–Ω—å —Ö–æ–ª–æ–¥–Ω—ã–º?", en: "Was the morning very cold?"}, {ru: "–û–Ω–∏ –±—ã–ª–∏ —É–¥–∏–≤–ª–µ–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–∞.", en: "They were surprised by the test results."}, {ru: "–ú—ã –Ω–µ –±—ã–ª–∏ —É–≤–µ—Ä–µ–Ω—ã –≤ –µ–≥–æ –º–æ—Ç–∏–≤–∞—Ö.", en: "We were not sure of his motives."}, {ru: "–ì–¥–µ –±—ã–ª–∏ –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è?", en: "Where were all the event participants?"}, {ru: "–†–∞–∑–≤–µ –æ–Ω–∏ –Ω–µ –±—ã–ª–∏ –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏?", en: "Weren't they prepared for the presentation?"}, {ru: "–ë—ã–ª–∏ –ª–∏ —É—Ç–µ—Ä—è–Ω—ã –≤–∞—à–∏ —Å–æ–ª–Ω–µ—á–Ω—ã–µ –æ—á–∫–∏?", en: "Were your sunglasses lost?"}, {ru: "–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±—ã–ª–∏ –æ–ø–æ–≤–µ—â–µ–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ.", en: "All the employees were informed in advance."}, {ru: "–†–∞–∑–≤–µ –º—ã –Ω–µ –±—ã–ª–∏ —Ç–∞–º –≤–º–µ—Å—Ç–µ?", en: "Weren't we there together?"}, {ru: "–£ –º–µ–Ω—è –Ω–µ—Ç —ç—Ç–∏—Ö –∫–Ω–∏–≥.", en: "I don't have these books."}, {ru: "–£ –º–µ–Ω—è –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–ª–æ —Ç–∞–∫–æ–≥–æ –æ–ø—ã—Ç–∞.", en: "I never had this experience."}, {ru: "–Ø –Ω–µ –≤–∏–¥–µ–ª —ç—Ç–æ–≥–æ —Ñ–∏–ª—å–º–∞.", en: "I didn't see that movie."}, {ru: "–ú—ã –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç.", en: "We did not get an answer."}, {ru: "–°–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Ç—ã —É–∂–µ –ø–æ–≤—Ç–æ—Ä—è–ª —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ?", en: "How many times did you repeat this exercise?"}, {ru: "–Ø —Ç–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–∫–æ–Ω—á–∏–ª —Å–æ–≤–µ—â–∞–Ω–∏–µ.", en: "I just finished the meeting."}, {ru: "–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –º—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏ —É—Ä–æ–∫, —É –º–µ–Ω—è –±—ã–ª–∏ –¥—Ä—É–≥–∏–µ –ø–ª–∞–Ω—ã.", en: "After we finished the lesson, I had other plans."}, {ru: "–û–Ω —Å–ø—Ä–æ—Å–∏–ª, –µ—Å—Ç—å –ª–∏ —É –º–µ–Ω—è –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã.", en: "He asked if I had all the necessary documents."}, {ru: "–ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ —è –¥–µ–ª–∞—é –∑–∞—Ä—è–¥–∫—É.", en: "Every morning I do my exercises."}, {ru: "–¢—ã –æ–±—ã—á–Ω–æ –≥–æ—Ç–æ–≤–∏—à—å —É–∂–∏–Ω —Å–∞–º?", en: "Do you usually cook dinner yourself?"}, {ru: "–û–Ω–∞ –Ω–µ –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–µ—Ä—ã–≤ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã.", en: "She does not take a break during work."}, {ru: "–ú—ã –¥–µ–ª–∞–µ–º –∑–∞–º–µ—Ç–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–π –ª–µ–∫—Ü–∏–∏.", en: "We take notes on every lecture."}, {ru: "–ó–∞—á–µ–º —Ç—ã —ç—Ç–æ –¥–µ–ª–∞–µ—à—å?", en: "Why do you do that?"}, {ru: "–û–Ω–∏ –Ω–µ –¥–µ–ª–∞—é—Ç —ç—Ç–æ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ.", en: "They do not do it intentionally."}, {ru: "–í –∫–∞–∫–∏–µ –¥–Ω–∏ —Ç—ã –¥–µ–ª–∞–µ—à—å —É–±–æ—Ä–∫—É?", en: "On which days do you do the cleaning?"}, {ru: "–Ø –≤—á–µ—Ä–∞ –ø–µ—Ä–µ–¥–µ–ª–∞–ª –≤–µ—Å—å –æ—Ç—á—ë—Ç.", en: "I did the entire report again yesterday."}, {ru: "–¢—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∏–¥–µ–ª —Ç–æ –∑–¥–∞–Ω–∏–µ?", en: "Did you really see that building?"}, {ru: "–û–Ω–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–∞ —Å–≤–æ—ë –æ–±–µ—â–∞–Ω–∏–µ.", en: "She did not keep her promise."}, {ru: "–ú—ã —Å–¥–µ–ª–∞–ª–∏ –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ–µ, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å.", en: "We did everything to help."}, {ru: "–ö–æ–≥–¥–∞ —Ç—ã –ø—Ä–æ–≤—ë–ª —ç—Ç–æ—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç?", en: "When did you do this experiment?"}, {ru: "–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —è –≤—Å—ë —Å–¥–µ–ª–∞–ª, —è —É—à—ë–ª –¥–æ–º–æ–π.", en: "After I did everything, I went home."}, {ru: "–†–∞–∑–≤–µ —Ç—ã –Ω–µ —Å–¥–µ–ª–∞–ª —Å–≤–æ–∏ –¥–µ–ª–∞ –ø–µ—Ä–µ–¥ —É—Ö–æ–¥–æ–º?", en: "Didn't you do your chores before leaving?"}, {ru: "–ó–∞–≤—Ç—Ä–∞ —è –∑–∞–∫–æ–Ω—á—É –ø—Ä–æ–µ–∫—Ç.", en: "I will finish the project tomorrow."}, {ru: "–¢—ã –±—É–¥–µ—à—å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏?", en: "Will you attend the conference?"}, {ru: "–û–Ω–∞ –Ω–µ –±—É–¥–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –¥–∏—Å–∫—É—Å—Å–∏–∏.", en: "She will not participate in the discussion."}, {ru: "–ú—ã –±—É–¥–µ–º –ø—Ä–∞–∑–¥–Ω–æ–≤–∞—Ç—å —Ç–≤–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –∑–¥–µ—Å—å.", en: "We will celebrate your birthday here."}, {ru: "–†–∞–∑–≤–µ –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç —Ä–∞–¥—ã –ø–æ–º–æ—á—å?", en: "Won't they be happy to help?"}, {ru: "–¢—ã –∑–∞–≤—Ç—Ä–∞ –ø–æ–µ–¥–µ—à—å –ø–æ–µ–∑–¥–æ–º?", en: "Will you travel by train tomorrow?"}, {ru: "–ú–æ–π –¥—Ä—É–≥ –≤–æ–∑—å–º—ë—Ç –Ω–∞ —Å–µ–±—è —ç—Ç—É –∑–∞–¥–∞—á—É.", en: "My friend will take on this task."}
];
let current = 0, assembledWords = [], wordOrder = [], prevIdx = -1, allowInput = true;
let usedWordByIndex = [];

function playWord(word){
  if(!('speechSynthesis' in window)) return;
  window.speechSynthesis.cancel();
  const u = new window.SpeechSynthesisUtterance(word);
  u.lang="en-US";
  u.rate = 0.7;
  const voices = window.speechSynthesis.getVoices();
  u.voice = voices.find(v=>v.lang && v.lang.startsWith('en')) || null;
  window.speechSynthesis.speak(u);
}

function getSentenceType(en) {
  const base = en.replace(/[.,?!]/g, '').toLowerCase();
  if (/^(what|where|when|how|why|who|which|whose|whom|are|is|am|does|do|did|will|can|would|should|could|must|was|were)\b/.test(base)) {
    let begin = "";
    if (/^(what|where|when|how|why|who|which|whose|whom)\b/.test(base))
      begin = "–í–æ–ø—Ä. —Å–ª–æ–≤–æ + ";
    return { type: "–í–æ–ø—Ä–æ—Å", hint: `${begin}–ü–æ–º–æ—â–Ω–∏–∫ + —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ + –≥–ª–∞–≥–æ–ª (+ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ)`};
  }
  if (/(\bnot\b)|n['‚Äô]t/.test(base)) {
    return { type: "–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ", hint: "–°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ + –ø–æ–º–æ—â–Ω–∏–∫ + not + –≥–ª–∞–≥–æ–ª (+ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ)" };
  }
  return { type: "–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ", hint: "–°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ + –ø–æ–º–æ—â–Ω–∏–∫ (did,do –Ω–µ —Å—Ç–∞–≤–∏–º , –Ω–æ –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—ã—á–Ω—ã–º–∏ –≥–ª–∞–≥–æ–ª–∞–º–∏ —Ç—É—Ç) + –≥–ª–∞–≥–æ–ª (+ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ)" };
}

function shuffle(arr) {
  for(let i = arr.length-1; i > 0; i--) {
    let j = Math.floor(Math.random()*(i+1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function showSentence(idx) {
  current = idx;
  prevIdx = idx;
  assembledWords = [];
  allowInput = true;
  usedWordByIndex = [];
  document.getElementById('russianSentence').innerText = sentences[idx].ru;
  document.getElementById('result').innerText = '';
  document.getElementById('assembled').innerText = '';
  const info = getSentenceType(sentences[idx].en);
  document.getElementById('scheme').innerText = info.hint;

  let words = sentences[idx].en.replace(/[.,?!]/g, '').split(' ');
  wordOrder = words.slice();
  let shuffled = words.slice(); shuffle(shuffled);

  let html = '';
  shuffled.forEach((word, i) => {
    html += `<span class="word-cell" id="word-cell-${i}">
      <button class="word-btn" id="word-btn-${i}" type="button" onclick="selectWord(this, '${word.replaceAll("'", "\\'")}',${i})">${word}</button>
      <button class="sound-btn" onclick="event.stopPropagation();playWord('${word.replaceAll("'", "\\'")}');return false;" title="–ü—Ä–æ—Å–ª—É—à–∞—Ç—å —Å–ª–æ–≤–æ">üîä</button>
    </span>`;
    usedWordByIndex[i] = false;
  });
  document.getElementById('words').innerHTML = html;
  updateButtonsState();
  document.getElementById('hintblock').innerHTML =
    `<b>–¢–∏–ø –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</b> ${info.type}`;
}

function selectWord(btn, word, idx) {
  if(!allowInput || btn.classList.contains('used')) return;
  if (word !== wordOrder[assembledWords.length]) {
    return;
  }
  assembledWords.push(word);
  btn.classList.add('used');
  usedWordByIndex[idx] = true;
  document.getElementById('assembled').innerText = assembledWords.join(' ');
  document.getElementById('result').innerText = '';
  updateButtonsState();

  if(assembledWords.length === wordOrder.length) {
    allowInput = false;
    playSound();
    setTimeout(() => checkSentence(true), 300);
  }
}

function updateButtonsState() {
  const btns = document.querySelectorAll('.word-btn');
  let expected = wordOrder[assembledWords.length];
  btns.forEach((btn, idx) => {
    if (btn.classList.contains('used')) {
      btn.disabled = true;
    } else {
      btn.disabled = !allowInput || btn.innerText !== expected;
      btn.classList.remove('used');
    }
  });
  usedWordByIndex.forEach((used, idx) => {
    let btn = document.getElementById('word-btn-' + idx);
    if(btn) {
      if (used) btn.classList.add('used');
      else btn.classList.remove('used');
    }
  });
}

function checkSentence(autoNext=false){
  let correct = sentences[current].en.replace(/[.,?!]/g, '').trim().replace(/\s+/g, ' ').toLowerCase();
  let user = assembledWords.join(' ').trim().toLowerCase();

  if(!user){
    document.getElementById('result').innerText = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.";
    allowInput = true;
    updateButtonsState();
    return;
  }

  if(user === correct){
      document.getElementById('result').innerText = "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!";
      if(autoNext) setTimeout(() => nextSentence(false), 1100);
  } else {
      document.getElementById('result').innerText = "‚ùå –û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ —Å–±–æ—Ä–∫–∏.";
      allowInput = true;
      clearAssembled();
  }
}

function clearAssembled() {
  allowInput = true;
  assembledWords = [];
  usedWordByIndex = usedWordByIndex.map(() => false);
  document.getElementById('assembled').innerText = '';
  let btns = document.querySelectorAll('.word-btn');
  btns.forEach(b => {
    b.disabled = false;
    b.classList.remove('used');
  });
  updateButtonsState();
  document.getElementById('result').innerText = '';
}

function nextSentence(direct=false) {
  let next;
  do {
    next = Math.floor(Math.random() * sentences.length);
  } while(next === prevIdx && sentences.length>1);
  showSentence(next);
  document.getElementById('result').innerText = '';
}

function playSound(){
  if(!('speechSynthesis' in window)) return;
  window.speechSynthesis.cancel();
  const utt = new window.SpeechSynthesisUtterance(sentences[current].en);
  utt.lang = "en-US";
  utt.rate = 0.7;
  const voices = window.speechSynthesis.getVoices();
  utt.voice = voices.find(v=>v.lang && v.lang.startsWith('en')) || null;
  window.speechSynthesis.speak(utt);
}

window.onload = () => {
  if (window.speechSynthesis.onvoiceschanged !== undefined) {
    window.speechSynthesis.onvoiceschanged = function(){};
  }
  showSentence(Math.floor(Math.random()*sentences.length));
};
</script>
</body>
</html>
